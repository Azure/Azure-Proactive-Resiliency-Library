<!DOCTYPE html>
<html><head><script src="/Azure-Proactive-Resiliency-Library/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=Azure-Proactive-Resiliency-Library/livereload" data-no-instant defer></script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <meta name="description" content="Best practices and resiliency recommendations for Cosmos DB and associated resources and settings.">
    
    <link rel="alternate" type="application/rss+xml" href="http://localhost:1313/Azure-Proactive-Resiliency-Library/services/database/cosmosdb/index.xml" title="Azure Proactive Resiliency Library (APRL)" />
    <link rel="canonical" href="http://localhost:1313/Azure-Proactive-Resiliency-Library/services/database/cosmosdb/">

    <title>
        
        Cosmos DB | Azure Proactive Resiliency Library (APRL)
        
    </title>

    
    <link href="http://localhost:1313/Azure-Proactive-Resiliency-Library/css/fontawesome.min.css" rel="stylesheet">

    
    <link rel="stylesheet" href="http://localhost:1313/Azure-Proactive-Resiliency-Library/css/ace.min.css">

    

    
    

  
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "kxpusfirv0");
  </script>

  
</head>
<body>

  <script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
  <script>addBackToTop({
      diameter: 75,
      backgroundColor: 'rgb(0, 123, 255)',
      textColor: '#ffffff',
      cornerOffset: 25,
      scrollDuration: 300
    })</script><nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow sticky-top" id="navbarMain">
    <div class="container">
        <div>
            <a class="navbar-brand" href="/Azure-Proactive-Resiliency-Library">
                
                    <img src="/Azure-Proactive-Resiliency-Library/media/img/aprl-white.png" />
                
                Azure Proactive Resiliency Library (APRL)
            </a>
        </div>
        
            <button class="navbar-toggler navbar-toggler-right collapsed" type="button" data-toggle="collapse" data-target="#navbarMainCollapse" aria-controls="navbarMainCollapse" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarMainCollapse">
              <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://aka.ms/waf" target="_blank">
                                  Well-Architected Framework
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="https://aka.ms/aprl/repo" target="_blank">
                                  Source Code <i class='fab fa-github'></i>
                                </a>
                            </li>
              </ul>
            </div>
    </div>
    
    
</nav>
<div class="container-fluid">
    <div class="row">

      <div class="docs-sidenav order-0 col-12 col-md-3 col-lg-2 col-xl-2 position-sticky border-right"><nav class="navbar navbar-expand-md navbar-light pl-0">
    <button class="navbar-toggler navbar-toggler-right collapsed" type="button" data-toggle="collapse" data-target="#sidenav-left-collapse" aria-controls="sidenav-left-collapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

     <div class="collapse navbar-collapse align-items-start flex-column" id="sidenav-left-collapse">
            <form class="form-inline my-2 my-lg-0 searchbox">
                <input class="form-control mr-sm-2 w-100" data-search-input id="search-by" type="text" placeholder="Search">
            </form>

        

         <ul class="navbar-nav flex-column pt-3">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/" class="nav-item my-1 parent haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/"><h6>Azure Services</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/ai-ml/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/ai-ml/"><h6>AI and ML</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/ai-ml/databricks/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/ai-ml/databricks/"><h6>Azure Databricks</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/batch/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/batch/"><h6>Batch</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/batch/batch-accounts/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/batch/batch-accounts/"><h6>Batch Accounts</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/compute/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/compute/"><h6>Compute</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/compute/site-recovery/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/compute/site-recovery/"><h6>Azure Site Recovery</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/compute/compute-gallery/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/compute/compute-gallery/"><h6>Compute Gallery</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/compute/image-templates/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/compute/image-templates/"><h6>Image Templates</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/compute/virtual-machine-scale-sets/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/compute/virtual-machine-scale-sets/"><h6>Virtual Machine Scale Sets</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/compute/virtual-machines/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/compute/virtual-machines/"><h6>Virtual Machines</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/container/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/container/"><h6>Containers</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/container/aks/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/container/aks/"><h6>AKS</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/container/container-registry/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/container/container-registry/"><h6>Container Registry</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/database/" class="nav-item my-1 parent haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/database/"><h6>Databases</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/database/sqldb/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/database/sqldb/"><h6>SQL DB</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/database/cosmosdb/" class="nav-item my-1 active
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/database/cosmosdb/"><h6>Cosmos DB</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/database/db-for-mysql/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/database/db-for-mysql/"><h6>DB for MySQL</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/database/db-for-postgresql/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/database/db-for-postgresql/"><h6>DB for PostgreSQL</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/database/redis-cache/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/database/redis-cache/"><h6>Redis Cache</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/general/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/general/"><h6>General</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/hybrid/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/hybrid/"><h6>Hybrid</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/integration/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/integration/"><h6>Integration</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/integration/api-management/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/integration/api-management/"><h6>Api Management</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/integration/event-grid/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/integration/event-grid/"><h6>Event Grid</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/integration/event-hub/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/integration/event-hub/"><h6>Event Hub</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/integration/service-bus/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/integration/service-bus/"><h6>Service Bus</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/iot/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/iot/"><h6>Internet of Things</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/iot/iot-hub/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/iot/iot-hub/"><h6>IoT Hub</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/management/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/management/"><h6>Management</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/management/automation-account/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/management/automation-account/"><h6>Automation Account</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/management/management-group/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/management/management-group/"><h6>Management Groups</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/management/resource-group/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/management/resource-group/"><h6>Resource Groups</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/migration/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/migration/"><h6>Migration</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/migration/azure-backup/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/migration/azure-backup/"><h6>Azure Backup</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/monitoring/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/monitoring/"><h6>Monitoring</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/monitoring/application-insights/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/monitoring/application-insights/"><h6>Application Insights</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/monitoring/log-analytics/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/monitoring/log-analytics/"><h6>Log Analytics</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/monitoring/resource-health-alerts/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/monitoring/resource-health-alerts/"><h6>Resource Health Alerts</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/monitoring/service-health-alerts/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/monitoring/service-health-alerts/"><h6>Service Health Alerts</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/"><h6>Networking</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/application-gateway/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/application-gateway/"><h6>Application Gateway</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/ddos-protection-plans/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/ddos-protection-plans/"><h6>DDoS Protection Plans</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/expressroute-circuits/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/expressroute-circuits/"><h6>ExpressRoute Circuits</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/expressroute-connection/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/expressroute-connection/"><h6>ExpressRoute Connection</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/expressroute-direct/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/expressroute-direct/"><h6>ExpressRoute Direct</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/expressroute-gateway/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/expressroute-gateway/"><h6>ExpressRoute Gateway</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/expressroute-traffic-collector/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/expressroute-traffic-collector/"><h6>ExpressRoute Traffic Collector</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/firewall/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/firewall/"><h6>Firewall</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/front-door/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/front-door/"><h6>Front Door</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/load-balancer/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/load-balancer/"><h6>Load Balancer</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/network-security-group/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/network-security-group/"><h6>Network Security Group</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/network-watcher/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/network-watcher/"><h6>Network Watcher</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/private-dns-zones/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/private-dns-zones/"><h6>Private DNS Zones</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/private-endpoints/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/private-endpoints/"><h6>Private Endpoints</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/public-ip/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/public-ip/"><h6>Public Ip</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/route-table/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/route-table/"><h6>Route Table</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/traffic-manager/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/traffic-manager/"><h6>Traffic Manager</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/virtual-networks/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/virtual-networks/"><h6>Virtual Networks</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/vpn-gateway/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/vpn-gateway/"><h6>VPN Gateway</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/networking/web-application-firewall/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/networking/web-application-firewall/"><h6>Web Application Firewall</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/security/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/security/"><h6>Security</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/security/key-vault/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/security/key-vault/"><h6>Key Vault</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/specialized-workloads/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/specialized-workloads/"><h6>Specialized Workloads</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/specialized-workloads/azure-virtual-desktop/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/specialized-workloads/azure-virtual-desktop/"><h6>Azure Virtual Desktop</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/specialized-workloads/azure-vmware-solution/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/specialized-workloads/azure-vmware-solution/"><h6>Azure VMware Solution</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/specialized-workloads/sap-on-azure/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/specialized-workloads/sap-on-azure/"><h6>SAP on Azure</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/storage/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/storage/"><h6>Storage</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/storage/azure-netapp-files/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/storage/azure-netapp-files/"><h6>Azure NetApp Files</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/storage/storage-account/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/storage/storage-account/"><h6>Storage Account</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/web/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/web/"><h6>Web</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/web/app-service-plan/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/web/app-service-plan/"><h6>App Service Plan</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/web/signalr/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/web/signalr/"><h6>SignalR</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/services/web/web-app/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/services/web/web-app/"><h6>Web App</h6></a>
        
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/well-architected/" class="nav-item my-1 haschildren
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/well-architected/"><h6>Well Architected Framework</h6></a>
        
        <ul class="list-unstyled ml-2">
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/well-architected/1-define/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/well-architected/1-define/"><h6>1 - Define</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/well-architected/2-design/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/well-architected/2-design/"><h6>2 - Design</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/well-architected/3-test/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/well-architected/3-test/"><h6>3 - Test</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/well-architected/4-deploy/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/well-architected/4-deploy/"><h6>4 - Deploy</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/well-architected/5-monitor/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/well-architected/5-monitor/"><h6>5 - Monitor</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/well-architected/6-respond/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/well-architected/6-respond/"><h6>6 - Respond</h6></a>
        
    </li>
        </ul>
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/contributing/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/contributing/"><h6>Contributing</h6></a>
        
    </li>
    <li data-nav-id="/Azure-Proactive-Resiliency-Library/privacy/" class="nav-item my-1
        ">
        
        
          <a class="nav-link p-0" href="/Azure-Proactive-Resiliency-Library/privacy/"><h6>Privacy</h6></a>
        
    </li>
        </ul>
    </div>
</nav>


</div>
        <div class="main col-12 order-1 col-md-9 col-lg-10 col-xl-10 py-3">
          

<div class="d-flex flex-column">
    <h1 class="js-title">Cosmos DB</h1>
    <div class="d-flex align-items-center">
        
    </div>
</div>

<hr>


<p>The presented resiliency recommendations in this guidance include Cosmos DB and associated resources and settings.</p>
<h2 id="summary-of-recommendations">Summary of Recommendations
  <a href="#summary-of-recommendations">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
      <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
      <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"/>
    </svg>
  </a>
</h2>

<div class="table table-striped" role="alert">
    <table>
<thead>
<tr>
<th style="text-align:left">Recommendation</th>
<th style="text-align:center">Category</th>
<th style="text-align:center">Impact</th>
<th style="text-align:center">State</th>
<th style="text-align:center">ARG Query Available</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="#cosmos-1---configure-at-least-two-regions-for-high-availability">COSMOS-1 – Configure at least two regions for high availability</a></td>
<td style="text-align:center">Availability</td>
<td style="text-align:center">High</td>
<td style="text-align:center">Preview</td>
<td style="text-align:center">Yes</td>
</tr>
<tr>
<td style="text-align:left"><a href="#cosmos-2---enable-service-managed-failover-for-multi-region-accounts-with-single-write-region">COSMOS-2 – Enable service-managed failover for multi-region accounts with single write region</a></td>
<td style="text-align:center">Disaster Recovery</td>
<td style="text-align:center">High</td>
<td style="text-align:center">Preview</td>
<td style="text-align:center">No</td>
</tr>
<tr>
<td style="text-align:left"><a href="#cosmos-3---evaluate-multi-region-write-capability">COSMOS-3 – Evaluate multi-region write capability</a></td>
<td style="text-align:center">Disaster Recovery</td>
<td style="text-align:center">High</td>
<td style="text-align:center">Preview</td>
<td style="text-align:center">Yes</td>
</tr>
<tr>
<td style="text-align:left"><a href="#cosmos-4---choose-appropriate-consistency-mode-reflecting-data-durability-requirements">COSMOS-4 – Choose appropriate consistency mode reflecting data durability requirements</a></td>
<td style="text-align:center">Disaster Recovery</td>
<td style="text-align:center">High</td>
<td style="text-align:center">Preview</td>
<td style="text-align:center">No</td>
</tr>
<tr>
<td style="text-align:left"><a href="#cosmos-5---configure-continuous-backup-mode">COSMOS-5 – Configure continuous backup mode</a></td>
<td style="text-align:center">Disaster Recovery</td>
<td style="text-align:center">High</td>
<td style="text-align:center">Preview</td>
<td style="text-align:center">Yes</td>
</tr>
<tr>
<td style="text-align:left"><a href="#cosmos-6---ensure-query-results-are-fully-drained">COSMOS-6 – Ensure query results are fully drained</a></td>
<td style="text-align:center">System Efficiency</td>
<td style="text-align:center">High</td>
<td style="text-align:center">Preview</td>
<td style="text-align:center">No</td>
</tr>
<tr>
<td style="text-align:left"><a href="#cosmos-7---maintain-singleton-pattern-in-your-client">COSMOS-7 – Maintain singleton pattern in your client</a></td>
<td style="text-align:center">System Efficiency</td>
<td style="text-align:center">Medium</td>
<td style="text-align:center">Preview</td>
<td style="text-align:center">No</td>
</tr>
<tr>
<td style="text-align:left"><a href="#cosmos-8---implement-retry-logic-in-your-client">COSMOS-8 – Implement retry logic in your client</a></td>
<td style="text-align:center">Application Resilience</td>
<td style="text-align:center">Medium</td>
<td style="text-align:center">Preview</td>
<td style="text-align:center">No</td>
</tr>
<tr>
<td style="text-align:left"><a href="#cosmos-9---monitor-cosmos-db-health-and-set-up-alerts">COSMOS-9 – Monitor Cosmos DB health and set up alerts</a></td>
<td style="text-align:center">Monitoring</td>
<td style="text-align:center">Medium</td>
<td style="text-align:center">Preview</td>
<td style="text-align:center">No</td>
</tr>
</tbody>
</table>

</div>


<div class="alert alert-info" role="alert">
    Definitions of states can be found <a href="http://localhost:1313/Azure-Proactive-Resiliency-Library/#definitions-of-terms-used-in-aprl">here</a>
</div>

<h2 id="recommendations-details">Recommendations Details
  <a href="#recommendations-details">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
      <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
      <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"/>
    </svg>
  </a>
</h2>
<h3 id="cosmos-1---configure-at-least-two-regions-for-high-availability">COSMOS-1 - Configure at least two regions for high availability
  <a href="#cosmos-1---configure-at-least-two-regions-for-high-availability">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
      <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
      <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"/>
    </svg>
  </a>
</h3>
<p><strong>Category: Availability</strong></p>
<p><strong>Impact: High</strong></p>
<p><strong>Guidance</strong></p>
<p>Azure implements multi-tier isolation approach with rack, DC, zone, and region isolation levels. Cosmos DB is by default highly resilient by running four replicas, but it is still susceptible to failures or issues with entire regions or availability zones. As such, it is crucial to enable at least a secondary region on your Cosmos DB to achieve higher SLA. Doing so does not incur any downtime at all and it is as easy as selecting a pin on map.</p>
<p><strong>Resources</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/distribute-data-globally">Distribute data globally with Azure Cosmos DB | Microsoft Learn</a></li>
</ul>
<p><strong>Resource Graph Query/Scripts</strong></p>


<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_d4389e6e9e" aria-expanded="false">
    Show/Hide Query/Script
</button>

<div class="collapse" id="collapse_d4389e6e9e">
  <div class="card card-body">
    







    
    




<div class="position-relative">
    <div class="position-absolute" style="right:0;">
        <button class="btn btn-light" data-clipboard-target="#clipboard_9033387752">
        Copy
        </button>
    </div>
    <div id="clipboard_9033387752">
    <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>Resources
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">where</span> <span style="color:#66d9ef">type</span> <span style="color:#f92672">=~</span> <span style="color:#e6db74">&#39;Microsoft.DocumentDb/databaseAccounts&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">where</span> array_length(properties.locations) <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> project recommendationId<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cosmos-1&#39;</span>, name, id, tags
</span></span></code></pre></div>
    </div>
</div>






  </div>
</div>
<p><br><br></p>
<h3 id="cosmos-2---enable-service-managed-failover-for-multi-region-accounts-with-single-write-region">COSMOS-2 - Enable service-managed failover for multi-region accounts with single write region
  <a href="#cosmos-2---enable-service-managed-failover-for-multi-region-accounts-with-single-write-region">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
      <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
      <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"/>
    </svg>
  </a>
</h3>
<p><strong>Category: Disaster Recovery</strong></p>
<p><strong>Impact: High</strong></p>
<p><strong>Guidance</strong></p>
<p>Cosmos DB is a battle-tested service with extremely high uptime and resiliency, but even the most resilient of systems sometimes run into a small hiccup. Should a region become unavailable, the Service-Managed failover option allows Azure Cosmos DB to fail over automatically to the next available region with no user action needed.</p>
<p><strong>Resources</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/how-to-manage-database-account#automatic-failover">Manage an Azure Cosmos DB account by using the Azure portal | Microsoft Learn</a></li>
</ul>
<p><strong>Resource Graph Query/Scripts</strong></p>


<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_6ebd7eb78c" aria-expanded="false">
    Show/Hide Query/Script
</button>

<div class="collapse" id="collapse_6ebd7eb78c">
  <div class="card card-body">
    







    
    




<div class="position-relative">
    <div class="position-absolute" style="right:0;">
        <button class="btn btn-light" data-clipboard-target="#clipboard_792abef0e3">
        Copy
        </button>
    </div>
    <div id="clipboard_792abef0e3">
    <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">//</span> <span style="color:#66d9ef">under</span><span style="color:#f92672">-</span>development
</span></span></code></pre></div>
    </div>
</div>






  </div>
</div>
<p><br><br></p>
<h3 id="cosmos-3---evaluate-multi-region-write-capability">COSMOS-3 - Evaluate multi-region write capability
  <a href="#cosmos-3---evaluate-multi-region-write-capability">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
      <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
      <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"/>
    </svg>
  </a>
</h3>
<p><strong>Category: Disaster Recovery</strong></p>
<p><strong>Impact: High</strong></p>
<p><strong>Guidance</strong></p>
<p>Multi-region write capability enables you to design multi-region application that is inherently highly available by virtue of being active in multiple regions. This, however, requires that you pay close considerations to consistency requirements and handle potential writes conflicts by way of conflict resolution policy. On the flip side, blindly enabling this configuration can lead to decreased availability due to unexpected application behavior and data corruption due to unhandled conflicts.</p>
<p><strong>Resources</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/distribute-data-globally">Distribute data globally with Azure Cosmos DB | Microsoft Learn</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/conflict-resolution-policies">Conflict resolution types and resolution policies in Azure Cosmos DB | Microsoft Learn</a></li>
</ul>
<p><strong>Resource Graph Query/Scripts</strong></p>


<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_35f1b3c49a" aria-expanded="false">
    Show/Hide Query/Script
</button>

<div class="collapse" id="collapse_35f1b3c49a">
  <div class="card card-body">
    







    
    




<div class="position-relative">
    <div class="position-absolute" style="right:0;">
        <button class="btn btn-light" data-clipboard-target="#clipboard_26a7f9f10b">
        Copy
        </button>
    </div>
    <div id="clipboard_26a7f9f10b">
    <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>Resources
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">where</span> <span style="color:#66d9ef">type</span> <span style="color:#f92672">=~</span> <span style="color:#e6db74">&#39;Microsoft.DocumentDb/databaseAccounts&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">where</span>
</span></span><span style="display:flex;"><span>    array_length(properties.locations) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">and</span>
</span></span><span style="display:flex;"><span>    properties.enableMultipleWriteLocations <span style="color:#f92672">==</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> project recommendationId<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cosmos-3&#39;</span>, name, id, tags
</span></span></code></pre></div>
    </div>
</div>






  </div>
</div>
<p><br><br></p>
<h3 id="cosmos-4---choose-appropriate-consistency-mode-reflecting-data-durability-requirements">COSMOS-4 - Choose appropriate consistency mode reflecting data durability requirements
  <a href="#cosmos-4---choose-appropriate-consistency-mode-reflecting-data-durability-requirements">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
      <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
      <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"/>
    </svg>
  </a>
</h3>
<p><strong>Category: Disaster Recovery</strong></p>
<p><strong>Impact: High</strong></p>
<p><strong>Guidance</strong></p>
<p>Within a globally distributed database environment, there is a direct relationship between the consistency level and data durability in the presence of a region-wide outage. As you develop your business continuity plan, you need to understand the maximum period of recent data updates the application can tolerate losing when recovering after a disruptive event. We recommend using Session consistency unless you have established that stronger consistency mode is needed, you are willing to tolerate higher write latencies, and understand that outages on read-only regions can affect the ability of write region to accept writes.</p>
<p><strong>Resources</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/consistency-levels">Consistency level choices - Azure Cosmos DB | Microsoft Learn</a></li>
</ul>
<p><strong>Resource Graph Query/Scripts</strong></p>


<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_6ebd7eb78c" aria-expanded="false">
    Show/Hide Query/Script
</button>

<div class="collapse" id="collapse_6ebd7eb78c">
  <div class="card card-body">
    







    
    




<div class="position-relative">
    <div class="position-absolute" style="right:0;">
        <button class="btn btn-light" data-clipboard-target="#clipboard_792abef0e3">
        Copy
        </button>
    </div>
    <div id="clipboard_792abef0e3">
    <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">//</span> <span style="color:#66d9ef">under</span><span style="color:#f92672">-</span>development
</span></span></code></pre></div>
    </div>
</div>






  </div>
</div>
<p><br><br></p>
<h3 id="cosmos-5---configure-continuous-backup-mode">COSMOS-5 - Configure continuous backup mode
  <a href="#cosmos-5---configure-continuous-backup-mode">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
      <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
      <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"/>
    </svg>
  </a>
</h3>
<p><strong>Category: Disaster Recovery</strong></p>
<p><strong>Impact: High</strong></p>
<p><strong>Guidance</strong></p>
<p>Cosmos DB automatically backs up your data and there is no way to turn back ups off. In short, you are always protected. But should any mishap occur – a process that went haywire and deleted data it shouldn’t, customer data was overwritten by accident, etc. – minimizing the time it takes to revert the changes is of the essence. With continuous mode, you can self-serve restore your database/collection to a point in time before such mishap occurred. With periodic mode, however, you must contact Microsoft support, which despite us striving to provide speedy help will inevitably increase the restore time.</p>
<p><strong>Resources</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/continuous-backup-restore-introduction">Continuous backup with point in time restore feature in Azure Cosmos DB | Microsoft Learn</a></li>
</ul>
<p><strong>Resource Graph Query/Scripts</strong></p>


<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_b6d695e206" aria-expanded="false">
    Show/Hide Query/Script
</button>

<div class="collapse" id="collapse_b6d695e206">
  <div class="card card-body">
    







    
    




<div class="position-relative">
    <div class="position-absolute" style="right:0;">
        <button class="btn btn-light" data-clipboard-target="#clipboard_4b5212b006">
        Copy
        </button>
    </div>
    <div id="clipboard_4b5212b006">
    <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>Resources
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">where</span> <span style="color:#66d9ef">type</span> <span style="color:#f92672">=~</span> <span style="color:#e6db74">&#39;Microsoft.DocumentDb/databaseAccounts&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">where</span>
</span></span><span style="display:flex;"><span>    properties.backupPolicy.<span style="color:#66d9ef">type</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Periodic&#39;</span> <span style="color:#66d9ef">and</span>
</span></span><span style="display:flex;"><span>    properties.enableMultipleWriteLocations <span style="color:#f92672">==</span> <span style="color:#66d9ef">false</span> <span style="color:#66d9ef">and</span>
</span></span><span style="display:flex;"><span>    properties.enableAnalyticalStorage <span style="color:#f92672">==</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> project recommendationId<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;cosmos-5&#39;</span>, name, id, tags
</span></span></code></pre></div>
    </div>
</div>






  </div>
</div>
<p><br><br></p>
<h3 id="cosmos-6---ensure-query-results-are-fully-drained">COSMOS-6 - Ensure query results are fully drained
  <a href="#cosmos-6---ensure-query-results-are-fully-drained">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
      <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
      <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"/>
    </svg>
  </a>
</h3>
<p><strong>Category: System Efficiency</strong></p>
<p><strong>Impact: High</strong></p>
<p><strong>Guidance</strong></p>
<p>Cosmos DB limits single response to 4 MB. If your query requests a large amount of data or data from multiple backend partitions, the results will span multiple pages for which separate requests must be issued. Each result page will indicate whether more results are available and provide a continuation token to access the next page. You must include a while loop in your code and traverse the pages until no more results are available.</p>
<p><strong>Resources</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/query/pagination#handling-multiple-pages-of-results">Pagination in Azure Cosmos DB | Microsoft Learn</a></li>
</ul>
<p><strong>Resource Graph Query/Scripts</strong></p>


<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_6ebd7eb78c" aria-expanded="false">
    Show/Hide Query/Script
</button>

<div class="collapse" id="collapse_6ebd7eb78c">
  <div class="card card-body">
    







    
    




<div class="position-relative">
    <div class="position-absolute" style="right:0;">
        <button class="btn btn-light" data-clipboard-target="#clipboard_792abef0e3">
        Copy
        </button>
    </div>
    <div id="clipboard_792abef0e3">
    <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">//</span> <span style="color:#66d9ef">under</span><span style="color:#f92672">-</span>development
</span></span></code></pre></div>
    </div>
</div>






  </div>
</div>
<p><br><br></p>
<h3 id="cosmos-7---maintain-singleton-pattern-in-your-client">COSMOS-7 - Maintain singleton pattern in your client
  <a href="#cosmos-7---maintain-singleton-pattern-in-your-client">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
      <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
      <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"/>
    </svg>
  </a>
</h3>
<p><strong>Category: System Efficiency</strong></p>
<p><strong>Impact: Medium</strong></p>
<p><strong>Guidance</strong></p>
<p>Not only is establishing a new database connection expensive, so is maintaining it. As such it is critical to maintain only one instance, a so-called “singleton”, of the SDK client per account per application. Connections, both HTTP and TCP, are scoped to the client instance. Most compute environments have limitations in terms of the number of connections that can be open at the same time and when these limits are reached, connectivity will be affected.</p>
<p><strong>Resources</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/conceptual-resilient-sdk-applications">Designing resilient applications with Azure Cosmos DB SDKs | Microsoft Learn</a>
<strong>Resource Graph Query/Scripts</strong></li>
</ul>


<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_6ebd7eb78c" aria-expanded="false">
    Show/Hide Query/Script
</button>

<div class="collapse" id="collapse_6ebd7eb78c">
  <div class="card card-body">
    







    
    




<div class="position-relative">
    <div class="position-absolute" style="right:0;">
        <button class="btn btn-light" data-clipboard-target="#clipboard_792abef0e3">
        Copy
        </button>
    </div>
    <div id="clipboard_792abef0e3">
    <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">//</span> <span style="color:#66d9ef">under</span><span style="color:#f92672">-</span>development
</span></span></code></pre></div>
    </div>
</div>






  </div>
</div>
<p><br><br></p>
<h3 id="cosmos-8---implement-retry-logic-in-your-client">COSMOS-8 - Implement retry logic in your client
  <a href="#cosmos-8---implement-retry-logic-in-your-client">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
      <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
      <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"/>
    </svg>
  </a>
</h3>
<p><strong>Category: Application Resilience</strong></p>
<p><strong>Impact: Medium</strong></p>
<p><strong>Guidance</strong></p>
<p>Cosmos DB SDKs by default handle large number of transient errors and automatically retry operations, where possible. That said, your application should add retry policies for certain well-defined cases that cannot be generically handled by the SDKs.</p>
<p><strong>Resources</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/conceptual-resilient-sdk-applications">Designing resilient applications with Azure Cosmos DB SDKs | Microsoft Learn</a></li>
</ul>
<p><strong>Resource Graph Query/Scripts</strong></p>


<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_6ebd7eb78c" aria-expanded="false">
    Show/Hide Query/Script
</button>

<div class="collapse" id="collapse_6ebd7eb78c">
  <div class="card card-body">
    







    
    




<div class="position-relative">
    <div class="position-absolute" style="right:0;">
        <button class="btn btn-light" data-clipboard-target="#clipboard_792abef0e3">
        Copy
        </button>
    </div>
    <div id="clipboard_792abef0e3">
    <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">//</span> <span style="color:#66d9ef">under</span><span style="color:#f92672">-</span>development
</span></span></code></pre></div>
    </div>
</div>






  </div>
</div>
<p><br><br></p>
<h3 id="cosmos-9---monitor-cosmos-db-health-and-set-up-alerts">COSMOS-9 - Monitor Cosmos DB health and set up alerts
  <a href="#cosmos-9---monitor-cosmos-db-health-and-set-up-alerts">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link" viewBox="0 0 16 16">
      <path d="M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"/>
      <path d="M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"/>
    </svg>
  </a>
</h3>
<p><strong>Category: Monitoring</strong></p>
<p><strong>Impact: Medium</strong></p>
<p><strong>Guidance</strong></p>
<p>It is good practice to monitor the availability and responsiveness of your Azure Cosmos DB resources and have alerts in place for your workload to stay proactive in case an unforeseen event occurs.</p>
<p><strong>Resources</strong></p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/create-alerts">Create alerts for Azure Cosmos DB using Azure Monitor | Microsoft Learn</a></li>
</ul>
<p><strong>Resource Graph Query/Scripts</strong></p>


<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_6ebd7eb78c" aria-expanded="false">
    Show/Hide Query/Script
</button>

<div class="collapse" id="collapse_6ebd7eb78c">
  <div class="card card-body">
    







    
    




<div class="position-relative">
    <div class="position-absolute" style="right:0;">
        <button class="btn btn-light" data-clipboard-target="#clipboard_792abef0e3">
        Copy
        </button>
    </div>
    <div id="clipboard_792abef0e3">
    <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">//</span> <span style="color:#66d9ef">under</span><span style="color:#f92672">-</span>development
</span></span></code></pre></div>
    </div>
</div>






  </div>
</div>
<p><br><br></p>


    



          <div class="row"></div> 

        </div>

      </div> 

    </div> 
<script src="http://localhost:1313/Azure-Proactive-Resiliency-Library/lib/jquery.min.js"></script> 
<script src="http://localhost:1313/Azure-Proactive-Resiliency-Library/lib/popper.min.js"></script> 

<script src="http://localhost:1313/Azure-Proactive-Resiliency-Library/js/bootstrap.min.js"></script> 


<script type="text/javascript" src="/Azure-Proactive-Resiliency-Library/plugins/lunr.min.js"></script>
<script type="text/javascript" src="/Azure-Proactive-Resiliency-Library/plugins/auto-complete.js"></script>
<link href="/Azure-Proactive-Resiliency-Library/plugins/auto-complete.css" rel="stylesheet">
<script type="text/javascript">
  
      var baseurl = "http:\/\/localhost:1313\/Azure-Proactive-Resiliency-Library\/";
  
</script>
<script type="text/javascript" src="/Azure-Proactive-Resiliency-Library/plugins/search.js"></script>

<script type="text/javascript" src="/Azure-Proactive-Resiliency-Library/plugins/favorites.js"></script>


<script type="text/javascript" src="/Azure-Proactive-Resiliency-Library/plugins/clipboard.js"></script>
<script>
  new ClipboardJS('.btn');
</script>
</body>

</html>
